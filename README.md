# jwp-subway-path

### API

http://localhost:8080/swagger-ui/index.html

### 2단계 기능 요구사항

- [x] 경로 조회 API
    - [x] 출발역과 도착역 사이의 최단 거리 경로를 구하는 API를 구현한다
        - [x] uri : GET path?departure=value1&arrival=value2
    - [x] 최단 거리 경로와 함께 총 거리 정보를 응답한다
        - [x] response : List\<Section\>, distance
    - [x] 한 노선에서 경로 찾기 뿐만 아니라 여러 노선의 환승도 고려한다
    - [x] WeightedMultigraph<String, DefaultWeightedEdge> graph
    - [x] Vertex : Station, Edge : Section 의 상하행역 정보, Weight : 거리
    - [x] 출발역과 도착역이 노선에 존재하지 않으면 예외 처리

- [x] 요금 조회 기능 추가
    - [x] 경로 조회 시 요금 정보를 포함하여 응답한다
    - [x] 요금 계산 방법
        - [x] 기본운임(10㎞ 이내): 기본운임 1,250원
        - [x] 이용 거리 초과 시 추가운임 부과
            - [x] 10km~50km: 5km 까지 마다 100원 추가
            - [x] 50km 초과: 8km 까지 마다 100원 추가

- [x] 데이터 베이스 설정
    - [x] 프로덕션은 로컬에 저장되도록
    - [x] 테스트는 인메모리로

### 1단계 기능 요구사항

#### 노선에 역 등록

- [x] 요청 시 거리는 양의 정수여야 한다
- [x] section 테이블에 요청된 노선에 해당하는 구간이 있는지 확인한다
    - [x] 노선에 해당하는 구간이 있으면 예외 처리
    - [x] 노선에 해당하는 구간이 없으면
        - [x] 노선이 비어있으면 구간 등록
        - [x] preStation 이 기존 노선에 있고 Station 이 기존 노선에 없을 때
            - [x] 기존 노선에서 preStation 의 다음 역을 구한다
                - [x] 다음 역이 있으면
                    - [x] 기존 구간의 거리보다 요청 구간의 거리가 크거나 같으면 예외
                    - [x] 작으면 구간 등록 후 거리 재배치
                - [x] 다음 역이 없으면
                    - [x] 구간 등록(하행 종점)
        - [x] preStation 이 기존 노선에 없고 Station 이 기존 노선에 있을 때
            - [x] 기존 노선에서 Station 의 이전 역을 구한다
                - [x] 이전 역이 있으면
                    - [x] 기존 구간의 거리보다 요청 구간의 거리가 크거나 같으면 예외
                    - [x] 작으면 구간 등록 후 거리 재배치
                - [x] 이전 역이 없으면
                    - [x] 구간 등록(상행 종점)
        - [x] 그 외는 예외 처리

#### 노선에 역 제거

- [x] 제거할 역이 노선에 존재하지 않으면 예외
- [x] 제거할 역이 상행 종점이거나 하행 종점이면 거리 재배치 필요 x
- [x] 제거할 역이 중간 역이면
    - [x] 제거할 역의 이전 역과 다음 역 구하기
    - [x] 제거할 역과 그 이전 역 사이의 거리 및 제거할 역과 그 다음 역 사이의 거리를 구하기
    - [x] 이전역과 다음역의 구간 추가
- [x] 제거할 역이 PreStation 이거나 Station 인 구간 모두 삭제

#### 노선별 역 조회

- [x] 조회할 노선의 List\<Section\> 을 만든다
- [x] 상행 종점을 찾고 Station 리스트에 추가한다
- [x] 다음 역을 찾아서 Station 리스트에 추가한다
- [x] 찾은 다음 역이 하행 종점이 될때까지 다음 역을 찾고 리스트에 추가하는 동작을 반복한다
