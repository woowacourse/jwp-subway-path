# jwp-subway-path

## 미션 설명
본 미션을 지하철 역과 노선을 관리하는 애플리케이션을 구현하는 것이다.
새로운 역을 추가하고 역을 삭제하고 조회가 가능해야한다.

## 구현할 기능 목록
- [x] 노선에 역 등록 API 신규 규현
  - [x] 첫 2개 등록하는 경우
    - [x] 노선이 존재하는지 파악한다.
    - [x] 요청 온 station이 존재하는지 판단한다.
    - [x] 노선이 새로운 것인지 판단한다.
  - [x] 노선에 역 추가 API 신규 구현
    - [x] 위치는 자유롭게 지정이 가능하다.
    - [x] 역이 등록될 때 거리(양의 정수) 정보도 등록되어야 한다.
    - [x] 하나의 역은 여러 노선이 등록이 가능하다.
    - [x] 역 하나를 종점으로 등록하는 경우
    - [x] 역 하나를 사이에 등록하는 경우
      - [x] 노선 중간에 역이 등록되는 경우 거리 정보를 재계산해야 된다.
      - [x] 노선 중간에 역이 들어오는 경우 세 역 간의 거리의 합과 기존 두역 간의 거리의 합이 같아야 한다.
      - [x] 노선은 갈래길을 가질 수 없다.
- [x] 노선에 역 제거 API 신규 구현
  - [x] 노선에 역이 2개만 있는 경우
    - [x] 역 모두를 삭제한다.
  - [x] 노선에 역이 2개 이상 있는 경우
    - [x] 역 사이의 거리를 재배치한다.
    - [x] 역 간의 위치를 재배치한다.
- [x] 노선 조회 API 수정
  - 노선에 포함된 역을 순서대로 보여주도록 응답한다.
- [x] 노선 목록 조회 API 수정
  - 노선에 포함된 역을 순서대로 보여주도록 응답한다.
- [x] 경로 조회 API 생성
  - [x] 출발 역과 도착 역이 주어지면 최단 거리로 경로를 생성한다.
  - [x] 이동 거리를 통해 요금을 책정한다.
    - [x] 10km 이내 기본 운임 요금 1,250원
    - [x] 10km 외 추가 요금
      - [x] 10km ~ 50km : 5km마다 100원 추가
      - [x] 50km 초과 : 8km마다 100원원 추가
- [x] 테이블 분리 (프로덕트에서 이용하는 db와 test에서 이용하는 db 분리)
- [x] 테이블 설계
  - [x] station
  - [x] line
  - [x] section(station과 station의 매핑 테이블)

## 리팩토링 목록
- [x] repository 책임 분리하기
  - lineRepository
    - line 저장
    - line 조회
  - sectionRepository
    - section 저장
    - section 최신화
  - stationRepository
    - station 저장
    - station 조회
- [x] 환경설정 파일을 properties에서 yml로 변경하기
- [x] pathfinder를 빈으로 관리하기